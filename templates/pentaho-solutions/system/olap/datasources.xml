<?xml version="1.0" encoding="UTF-8"?>
<DataSources>
  <DataSource>
    <DataSourceName>Provider=Mondrian;DataSource=Pentaho</DataSourceName>
    <DataSourceDescription>Pentaho BI Platform Datasources</DataSourceDescription>
    <URL>http://localhost:8080/pentaho/Xmla?userid=joe&amp;password=password</URL>
    <DataSourceInfo>Provider=mondrian</DataSourceInfo>
    <ProviderName>PentahoXMLA</ProviderName>
    <ProviderType>MDP</ProviderType>
    <AuthenticationMode>Unauthenticated</AuthenticationMode>
    <Catalogs>
		<% scope.lookupvar('pentaho::config::catalogs').each do |catalog| %>
			<Catalog name="<%= catalog['name'] %>">
				<DataSourceInfo>Provider=mondrian;DataSource=<%= catalog['datasource'] %>;EnableXmla=False</DataSourceInfo>
				<Definition>solution:<%= catalog['solution'] %>/mondrian/<%= catalog['schema'] %></Definition>
			</Catalog>
		<% end %>
    </Catalogs>
  </DataSource>
</DataSources>
